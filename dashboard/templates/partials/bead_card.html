{# Bead card partial - requires 'bead' variable to be passed #}
<div class="bead-card bg-gray-800 rounded-lg p-4 shadow-md hover:shadow-lg hover:bg-gray-750 transition-all cursor-pointer border border-gray-700"
     hx-get="/api/beads/{{ bead.id }}"
     hx-target="#bead-detail-modal"
     hx-swap="innerHTML"
     hx-trigger="click">

    {# Header: ID and Priority Badge #}
    <div class="flex items-center justify-between mb-2">
        <span class="text-xs font-mono text-gray-500 truncate" title="{{ bead.id }}">
            {{ bead.id.split('-')[-1][:8] }}
        </span>

        {# Priority badge #}
        {% set priority_colors = {
            0: 'bg-red-600 text-white',
            1: 'bg-orange-500 text-white',
            2: 'bg-yellow-500 text-gray-900',
            3: 'bg-green-500 text-white',
            4: 'bg-gray-500 text-white'
        } %}
        <span class="px-2 py-0.5 text-xs font-semibold rounded {{ priority_colors.get(bead.priority, 'bg-gray-500 text-white') }}">
            P{{ bead.priority }}
        </span>
    </div>

    {# Title #}
    <h3 class="text-sm font-medium text-gray-100 mb-2 line-clamp-2">
        {{ bead.title }}
    </h3>

    {# Labels #}
    {% if bead.labels %}
    <div class="flex flex-wrap gap-1 mb-2">
        {% set label_colors = {
            'dev': 'bg-blue-900 text-blue-200',
            'qa': 'bg-purple-900 text-purple-200',
            'architecture': 'bg-indigo-900 text-indigo-200',
            'dashboard': 'bg-cyan-900 text-cyan-200',
            'docs': 'bg-emerald-900 text-emerald-200',
            'epic': 'bg-pink-900 text-pink-200',
            'review': 'bg-amber-900 text-amber-200',
            'scripts': 'bg-teal-900 text-teal-200',
            'bug': 'bg-red-900 text-red-200'
        } %}
        {% for label in bead.labels[:3] %}
        <span class="px-1.5 py-0.5 text-xs rounded {{ label_colors.get(label, 'bg-gray-700 text-gray-300') }}">
            {{ label }}
        </span>
        {% endfor %}
        {% if bead.labels|length > 3 %}
        <span class="px-1.5 py-0.5 text-xs rounded bg-gray-700 text-gray-400">
            +{{ bead.labels|length - 3 }}
        </span>
        {% endif %}
    </div>
    {% endif %}

    {# Issue Type Badge #}
    <div class="flex items-center justify-between">
        {% set type_icons = {
            'task': 'ğŸ“‹',
            'bug': 'ğŸ›',
            'feature': 'âœ¨',
            'epic': 'ğŸ¯'
        } %}
        <span class="text-xs text-gray-500">
            {{ type_icons.get(bead.issue_type, 'ğŸ“‹') }} {{ bead.issue_type }}
        </span>

        {# Assigned agent (if in progress) #}
        {% if bead.owner and bead.status == 'in_progress' %}
        <span class="text-xs text-primary-400 truncate ml-2" title="{{ bead.owner }}">
            {{ bead.owner.split('@')[0] if '@' in bead.owner else bead.owner }}
        </span>
        {% endif %}
    </div>
</div>
